<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sylvaria Merchant Interface</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f4f4f4;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h1 { color: #2c3e50; }
    input, button {
      padding: 8px;
      margin: 5px 0;
      width: 100%;
      box-sizing: border-box;
    }
    .item-list, .order-list {
      margin-top: 20px;
      background: #fff;
      padding: 10px;
      border-radius: 6px;
    }
    .item-entry {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
    }
    .item-entry span {
      flex: 1;
    }
    .total {
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>üõçÔ∏è Sylvaria Merchant Interface</h1>

  <h3>Add Item to Inventory</h3>
  <input type="text" id="itemName" placeholder="Item name (e.g. Tea of Honor)" />
  <input type="number" id="itemPrice" placeholder="Price in SYL (e.g. 1.00)" step="0.01" />
  <button onclick="addItem()">Add to Inventory</button>

  <div class="item-list" id="inventoryList">
    <h3>Inventory</h3>
  </div>

  <h3>Build Order</h3>
  <select id="orderSelect"></select>
  <button onclick="addToOrder()">Add to Order</button>

  <div class="order-list" id="orderList">
    <h3>Current Order</h3>
  </div>

  <div class="total" id="totalDisplay">Total: 0 SYL</div>
  <button onclick="generateOrder()">Generate Ceremonial Order</button>
  <button onclick="clearOrder()">Clear Order</button>

  <script>
    const TAX_RATE = 0.07;
    const BURN_RATE = 0.01;
    let inventory = JSON.parse(localStorage.getItem("syl_inventory")) || [];
    let order = [];

    function saveInventory() {
      localStorage.setItem("syl_inventory", JSON.stringify(inventory));
    }

    function addItem() {
      const name = document.getElementById("itemName").value.trim();
      const price = parseFloat(document.getElementById("itemPrice").value);
      if (!name || isNaN(price)) return alert("Enter valid name and price.");
      inventory.push({ name, price });
      saveInventory();
      renderInventory();
      renderSelect();
      document.getElementById("itemName").value = "";
      document.getElementById("itemPrice").value = "";
    }

    function renderInventory() {
      const list = document.getElementById("inventoryList");
      list.innerHTML = "<h3>Inventory</h3>";
      inventory.forEach((item, i) => {
        const div = document.createElement("div");
        div.className = "item-entry";
        div.innerHTML = `<span>${item.name}</span><span>${item.price.toFixed(2)} SYL</span>`;
        list.appendChild(div);
      });
    }

    function renderSelect() {
      const select = document.getElementById("orderSelect");
      select.innerHTML = "";
      inventory.forEach((item, i) => {
        const opt = document.createElement("option");
        opt.value = i;
        opt.textContent = `${item.name} - ${item.price.toFixed(2)} SYL`;
        select.appendChild(opt);
      });
    }

    function addToOrder() {
      const index = document.getElementById("orderSelect").value;
      if (index === "") return;
      order.push(inventory[index]);
      renderOrder();
    }

    function renderOrder() {
      const list = document.getElementById("orderList");
      list.innerHTML = "<h3>Current Order</h3>";
      order.forEach((item, i) => {
        const div = document.createElement("div");
        div.className = "item-entry";
        div.innerHTML = `<span>${item.name}</span><span>${item.price.toFixed(2)} SYL</span>`;
        list.appendChild(div);
      });
      updateTotal();
    }

    function updateTotal() {
      const subtotal = order.reduce((sum, item) => sum + item.price, 0);
      const salesTax = subtotal * TAX_RATE;
      const burnTax = subtotal * BURN_RATE;
      const total = subtotal + salesTax + burnTax;
      document.getElementById("totalDisplay").textContent =
        `Total: ${total.toFixed(2)} SYL (includes ${salesTax.toFixed(2)} SYL sales tax + ${burnTax.toFixed(2)} SYL burn tax)`;
    }

    function generateOrder() {
      if (order.length === 0) return alert("No items in order.");
      const ceremonial = order.map(item => `‚Ä¢ ${item.name} ‚Äî ${item.price.toFixed(2)} SYL`).join("\n");
      const subtotal = order.reduce((sum, item) => sum + item.price, 0);
      const salesTax = subtotal * TAX_RATE;
      const burnTax = subtotal * BURN_RATE;
      const total = subtotal + salesTax + burnTax;
      alert(`üßæ Ceremonial Order:\n\n${ceremonial}\n\nSales Tax: ${salesTax.toFixed(2)} SYL\nBurn Tax: ${burnTax.toFixed(2)} SYL\nTotal: ${total.toFixed(2)} SYL`);
    }

    function clearOrder() {
      order = [];
      renderOrder();
    }

    renderInventory();
    renderSelect();
  </script>
</body>
</html>
